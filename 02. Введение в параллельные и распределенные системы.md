
# Многопроцессорные системы

Ведя разговор о распределенных системах, которые, логично, являются многопроцессорными, нельзя не вспомнить их ближайших родственников в общем дереве архитектур.

Вспоминаем `Операционные Системы`: Наиболее классическая классификация многопроцессорных систем была разработала Флинном (`M.Flynn`) и основывалась на анализе характеристик потоков информации в машине - _потока информации_ и _потока данных_. Распределенные системы относятся к классу `MIMD` - `Multiple Instruction, Multiple Data`. 

Однако в этом классе помимо распределенных систем также присутствуют многопроцессорные системы с общей памятью. Примерами, в частности, тут выступают `UMA`- (`SMP`) и `NUMA`- системы. Их очевидными преимуществами являются **большая производительность** и **большая надёжность данных**, обеспеченные, как минимум, автоматической (за счёт общей памяти) синхронизацией данных и отсутствия избыточной и постоянной передачи данных для корректности работы мультипроцессорной системы. \
Но вместе с удобствами приходят и недостатки.  Ключевая проблема таких систем - **их сложность в сравнении с однопроцессорными системами** (из которых, по сути, строятся РС). Кроме этого, такие системы по причине необходимости обеспечения доступа к памяти, поддержки когерентности кэшей очень **ограничены при наращивании** (зарегистрированный максимум - 64 процессора).

Отсюда вытекают уже несколько раз упомянутые нами в той или иной мере ***преимущества РС над централизованными*** (пусть и многопроцессорными) ***системами***:
 + **Возможность достичь** такой высокой **производительности** путем объединения микропроцессоров, **которая недостижима в централизованном компьютере**;
 + **Естественная распределенность данных и инструкций**, обеспеченная структурой из множества самостоятельных узлов, позволяющая лучше контролировать внутренние процессы; 
 + **Надежность самой системы** (выход из строя нескольких узлов незначительно снизит производительность);
 + **Простая наращиваемость производительности**, а также **гибкость использования различных ЭВМ** и **упрощение постепенной модернизации** посредством замены компьютеров.

# Виды операционных систем

Мы уже отдельно затрагивали вопрос [Распределенной ОС](<01. Введение в предмет.md#Распределенные Операционные Системы>), однако в РС часто встречаются ещё два вида ОС - **Сетевые** и **Мультипроцессорные**

 + ***Сетевые ОС*** -  машины  обладают  высокой  степенью автономности, общесистемных требований мало. Можно вести диалог с другой ЭВМ, вводить задания в ее очередь пакетных заданий, иметь доступ к удаленным файлам, хотя иерархия директорий может быть разной для разных клиентов. \
   Пример - серверы файлов

 + ***Распределенные ОС*** - единый глобальный межпроцессный коммуникационный механизм, глобальная схема контроля доступа, одинаковое видение файловой системы. Под управлением распределенной ОС компьютеры работают, как единое целое. Пользователь обычно не видит различия между отдельными компьютерами. Главная задача - распределение задач и ресурсов между узлами, обеспечивая прозрачность и эффективность.

 + ***ОС мультипроцессоров*** - единая очередь процессов, ожидающих выполнения, одна файловая система. ОС мультипроцессоров предназначены для управления компьютерами с несколькими процессорами (или ядрами) в рамках одной физической машины. Они используют возможности параллельной обработки на аппаратном уровне.


| Свойства                                                                | Сетевая ОС       | Распределенная ОС | ОС мультипроцессоров |
| ----------------------------------------------------------------------- | ---------------- | ----------------- | -------------------- |
| Компьютерная система выглядит<br>как виртуальный<br>мультипроцессор<br> | ***НЕТ***        | ***ДА***          | ***ДА***             |
| Имеется ли единая очередь выполняющихся процессов<br>                   | ***НЕТ***        | ***НЕТ***         | ***ДА***             |
| Имеется хорошо определенная семантика разделения файлов                 | Обычно ***НЕТ*** | ***ДА***          | ***ДА***             |

# Принципы построения распределенных ОС

Распределенные операционные системы (ОС) строятся на основе ряда ключевых принципов, обеспечивающих их работоспособность, эффективность и удобство использования. Эти принципы включают ***прозрачность***, ***гибкость***, ***надежность***, ***эффективность*** (производительность) и ***масштабируемость***.

 + ***Прозрачность*** - важнейший принцип, который направлен на сокрытие от пользователя и приложений деталей реализации распределенной системы. Достигается прозрачность за счет следующих видов:
     	+  **Прозрачность расположения:** Пользователь не должен знать, где именно физически расположены ресурсы, к которым он обращается (например, файлы, данные, приложения). Система сама должна определить оптимальный путь доступа к ресурсу;
     	+  **Прозрачность миграции:** Ресурсы могут перемещаться между узлами системы без изменения их имен и идентификаторов. Пользователи и приложения продолжают обращаться к ним так, как если бы они оставались на прежнем месте;
     	+  **Прозрачность размножения:** Пользователь не должен знать о том, сколько копий ресурса (например, данных, сервисов) существует в системе. Система сама управляет репликацией данных и обеспечивает доступ к наиболее подходящей копии;
     	+  **Прозрачность конкуренции:** Множество пользователей могут одновременно обращаться к одним и тем же ресурсам. Распределенная ОС должна автоматически управлять доступом к ресурсам, обеспечивая честность и предотвращая конфликты;
     	+  **Прозрачность параллелизма:** Система может выполнять задачи параллельно на нескольких узлах, не требуя от пользователя каких-либо специальных действий или знаний об этом процессе;

 + ***Гибкость*** -  способность РС легко адаптироваться к изменяющимся условиям, требованиям и нагрузкам. Это достигается за счет таких характеристик, как **масштабируемость**, позволяющая системе расти или уменьшаться в зависимости от потребностей, **адаптируемость**, позволяющая системе перенастраиваться и изменять свою структуру при необходимости, а также **расширяемость**, которая обеспечивает возможность добавлять новые функции и возможности без значительных переработок существующей архитектуры. Гибкие распределенные системы обеспечивают возможность быстрой реакции на изменения, способствуя повышению общей устойчивости и долговечности системы.

 + ***Надежность*** - критически важный аспект распределенных систем, так как их работа должна быть непрерывной и устойчивой к сбоям. Надежность включает в себя:
	    + **Доступность**: Система должна быть доступна для пользователей в любой момент времени, несмотря на возможные сбои;
	    + **Устойчивость к ошибкам** (`fault tolerance`): Система должна продолжать работать даже при возникновении сбоев в отдельных компонентах (узлах, сервисах);
     	+ **Секретность**: Система должна обеспечивать конфиденциальность данных и предотвращать несанкционированный доступ к ним;

 + ***Производительность*** -  характеризуется скоростью выполнения задач и эффективностью использования ресурсов. Она зависит от нескольких факторов, включая:
	    + **Грануллированность**: Определение размера и сложности отдельных задач или компонентов системы. Различают **мелкозернистый параллелизм** (`fine-grained parallelism`), когда задачи разбиваются на множество мелких подзадач, выполняющихся параллельно, и **крупнозернистый параллелизм** (`coarse-grained parallelism`), когда параллельно выполняются более крупные, независимые задачи;
     	+ **Затраты на надежность**: Обеспечение устойчивости к ошибкам и других параметров надежности зачастую требует дополнительных ресурсов и накладных расходов, которые необходимо учитывать при проектировании;

 + ***Масштабируемость*** -  способность системы справляться с ростом нагрузки, количества пользователей и данных. Для обеспечения масштабируемости распределенная ОС должна использовать **децентрализованные алгоритмы**, которые имеют следующие характеристики:
	    + **Отсутствие глобального знания**: ни один узел системы не обладает полной информацией о её состоянии;
	    + **Принятие решений на основе локальной информации**: каждый узел принимает решения на основе только той информации, которой он обладает, без необходимости обращаться к центральному контроллеру;
     	+ **Отказоустойчивость**: отказ одного или нескольких узлов не должен приводить к полному отказу системы;
     	+ **Отсутствие глобальных часов**: алгоритмы не должны полагаться на существование единого точного времени для всех узлов системы;

